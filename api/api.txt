数据服(登录,金币,等级(游客没有数据但是可以付费加速))
个人主页(包含热点图片和关注up主图片)
单人主页(仅个人图片)
热点图片(热点词汇)
生成图片

redis缓存用户所在服务器(数据服,全局图片服,个人图片服,热点图片服)

用户请求生成图片:
   http_gate创建生成图片订单uuid和信息
生成图片排队:
   普通用户 在redis缓存排队信息,用户每3秒询问一次,排队超过一定时间进入生成图片队列
   付费加速 用户直接进入生成图片队列
生成图片:
  用户进入生成图片队列后每3秒询问一次状态,生成图片服接受订单后,http_gate应答用户询问,前端页面修改状态
  生成图片服调用python生成指定名称的图片到指定目录,生成图片服将图片上传至存储桶,
  并将订单uuid,图片自增id,用户信息,图片存储桶url记录到mongodb
  将图片url缓存到redis,用户询问时http_gate返回url